<html>
<head>
<script src="https://apis.mappls.com/advancedmaps/api/6b8b61d5-42ca-4dbc-a87f-cd4e5045aa8c/map_sdk?layer=vector&v=3.0"></script>
<script src="https://apis.mappls.com/advancedmaps/api/6b8b61d5-42ca-4dbc-a87f-cd4e5045aa8c/map_sdk_plugins?v=3.0&libraries=tracking"></script>
<script src="https://cdn.mapmyindia.com/Intouch/sdk/v2.5/intouch-sdk.js"></script>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
 <body>
	 <div id="mapdiv"></div>
</body>
	<script type="text/javascript" defer=defer>
var intouchSdk = new IntouchSdk();
function deviceDataCallback(data) {
    console.log(data);
}

function updateToken() {
    console.log("tokenUpdated");
    intouchSdk.updateAccessToken("6b8b61d5-42ca-4dbc-a87f-cd4e5045aa8c"); // While adding the token Don't use Bearer word, since it is being internally added.
}
	//intouchSdk.initialize(mapdiv, "205e0a4f-b421-4df2-9ac5-e2df9db6f689", updateToken); 
intouchSdk.initialize(mapdiv, "6b8b61d5-42ca-4dbc-a87f-cd4e5045aa8c", updateToken); // For Map access token Use the Map API Rest key

// var deviceObj = {};
// // deviceObj.customIconUrl = "";
// deviceObj.iconType = 'car';// Allowed types are "bike", "car", "bus", "truck", "men".
// deviceObj.deviceId = 6757024; // Enter the Device Id for which you want to see the Tracking. 
// deviceObj.bindPopUp = true;
//intouchSdk.trackDevice(deviceObj, deviceDataCallback);

// function getEta(data){
//     console.log(data);
// }            

var  jobObj={};
var eta;
jobObj.jobId="6753d34f1ea81d1035ebb9f0";
jobObj.vehicleIconUrl='https://cdn.mapmyindia.com/Intouch/web/img/Start-marker.png'; 
// jobObj.sourceIconUrl; 
// jobObj.destinationIconUrl=''; 
// jobObj.mapStyling='standard-night';
jobObj.liveRefresh = 3; //new i/p param: takes values in seconds.
jobObj.polylineColor='#B8860B'; 
jobObj.polylineThickness=5; 
jobObj.polylineType='solid'; 
jobObj.fitBound='on route';//'no fitBound','on route','on vehcile' 
intouchSdk.trackJob(jobObj,getJobDetails);
function getJobDetails(data) {
    console.log(data);
}


setInterval(getJobDetails, 5000);

</script>

</html>

